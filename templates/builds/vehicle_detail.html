{% extends "base.html" %}

{% block content %}
<h1>{{ vehicle.make }} {{ vehicle.model }}</h1>

<p><strong>Owner:</strong> {{ vehicle.customer }}</p>
<p><strong>Build ID:</strong> {{ vehicle.vin_or_id }}</p>
<p><strong>Status:</strong> {{ vehicle.get_status_display }}</p>

<h2>Build Stages</h2>

<a href="{% url 'stage_create' vehicle.pk %}" class="button">Add New Build Stage</a>

{% if stages %}
    <ol>
        {% for stage in stages %}
        <li>
            <strong>{{ stage.name }}</strong> â€” {{ stage.get_status_display }}

            {% if stage.due_date %}
                (Due: {{ stage.due_date }})
            {% endif %}

            {% if stage.description %}
                <br>{{ stage.description }}
            {% endif %}

            <br>
            <a href="{% url 'stage_update' stage.pk %}" class="button">Edit Stage</a>
            <a href="{% url 'stage_delete' stage.pk %}" class="button red">Delete Stage</a>
        </li>
        {% endfor %}
    </ol>
{% else %}
    <p>No build stages yet.</p>
{% endif %}

<hr>

<a href="{% url 'vehicle_update' vehicle.pk %}" class="button">Edit Vehicle</a>
<a href="{% url 'vehicle_delete' vehicle.pk %}" class="button red">Delete Vehicle</a>
<a href="{% url 'vehicle_list' %}">Back to all vehicles</a>

{% endblock %}
